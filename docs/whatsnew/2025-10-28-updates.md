---
title: "AntGent v0.12.0: Enhanced Summarization Workflows and API"
date: 2025-10-28
tags: [release, summarization, workflows, api]
---

# AntGent v0.12.0: Enhanced Summarization Workflows and API

AntGent v0.12.0 introduces a redesigned summarization system with support for multiple summary types, iterative refinement, and both synchronous and asynchronous API patterns. This release provides more flexibility for different use cases while maintaining backwards compatibility.

## Core Changes

### Multi-Type Summarization

The summarization system now supports distinct summary types via the `SummaryType` enum:

- **MACHINE**: Comprehensive summaries optimized for LLM processing, preserving all context and details while reducing redundancy
- **PRETTY**: Concise summaries optimized for human reading, focused on key points and readability

Each type uses specialized agents (`SummaryAgent` and `SummaryPrettyAgent`) with prompts tuned for their specific purpose.

**Usage:**

```python
from antgent.agents.summarizer.models import SummaryInput, SummaryType

context = SummaryInput(
    content="...",
    to_language="en",
    summary_type=SummaryType.MACHINE,
    iterations=2
)
```

### Iterative Refinement

Summaries can now be improved through multiple iterations with automatic quality grading:

1. Generate initial summary
2. Grade quality using judge agent
3. Provide feedback for improvement
4. Repeat until quality threshold is met or max iterations reached
5. Return the best-graded summary

The `iterations` parameter controls this behavior. Setting it to 1 skips the grading loop.

### Workflow Architecture

The monolithic summarizer workflow has been split into two specialized workflows:

- **TextSummarizerOneTypeWorkflow**: Generates a single summary type
- **TextSummarizerAllWorkflow**: Generates all summary types in parallel

This separation improves performance for multi-type requests and simplifies the codebase. The logic for running one type of summarization has been extracted to `antgent/agents/summarizer/logic.py` for reusability.

### API Enhancements

New endpoints provide both synchronous and asynchronous execution patterns:

**Synchronous (wait for result):**
- `POST /api/workflows/summarizer/sync` - Single type
- `POST /api/workflows/summarizer-multi/sync` - All types

**Asynchronous (returns workflow_id):**
- `POST /api/workflows/summarizer/run` - Start single type
- `GET /api/workflows/summarizer/{workflow_id}/status` - Check status
- `POST /api/workflows/summarizer-all/run` - Start all types
- `GET /api/workflows/summarizer-all/{workflow_id}/status` - Check status

A generic status endpoint is also available at `GET /api/workflows/status/{workflow_id}` for any workflow type.

### Internal vs External Models

The API now properly separates internal workflow details from external responses:

- **InternalSummaryResult**: Contains all grades, iterations, and intermediate summaries
- **InternalSummariesAllResult**: Internal container for multi-type results
- **SummaryOutput**: Clean output with final summary only
- **SummariesResult**: Public-facing multi-summary response

This separation keeps API responses focused while retaining full debugging information internally.

## Breaking Changes

The following changes may affect existing code:

1. **Workflow classes renamed**: `TextSummarizerWorkflow` split into `TextSummarizerOneTypeWorkflow` and `TextSummarizerAllWorkflow`
2. **Model updates**: `SummaryResult` replaced with type-specific models
3. **Activity names**: `run_summarizer_activity` renamed to `run_summarizer_one_type_activity`

## Migration Guide

### Updating Workflow References

```python
# Before
from antgent.workflows import TextSummarizerWorkflow

# After (choose based on need)
from antgent.workflows import TextSummarizerOneTypeWorkflow, TextSummarizerAllWorkflow
```

### Updating API Calls

```python
# Before: Single endpoint for all use cases
response = requests.post("/api/workflows/summarizer", json=data)

# After: Choose endpoint based on use case
# For synchronous (wait for result):
response = requests.post("/api/workflows/summarizer/sync", json=data)

# For asynchronous (get workflow_id):
response = requests.post("/api/workflows/summarizer/run", json=data)
workflow_id = response.json()["workflow_id"]
status = requests.get(f"/api/workflows/summarizer/{workflow_id}/status")
```

### Specifying Summary Type

```python
# Default is MACHINE type
context = SummaryInput(content="...", to_language="en")

# Explicitly request PRETTY type
context = SummaryInput(
    content="...",
    to_language="en",
    summary_type=SummaryType.PRETTY
)

# Request all types at once
response = requests.post("/api/workflows/summarizer-multi/sync", json=data)
# Returns: {"summaries": {"machine": {...}, "pretty": {...}}}
```

## Technical Details

### Agent Configuration

Both agent types now include `max_turns: 1` in their configuration to prevent unnecessary conversation loops during structured output generation.

### Prompt Updates

The machine summary prompt emphasizes:
- Preserving all information and context
- Reducing redundancy without losing detail
- Optimizing for LLM processing over human readability

The pretty summary prompt focuses on:
- Conciseness and clarity
- Key points extraction
- Human readability

### New Utilities

Added `parse_dynamic_agent_config` utility for parsing dynamic agent configurations from JSON strings. Available via:

```python
from antgent.utils import parse_dynamic_agent_config
```

## Installation

Update to the latest version:

```bash
uv sync
```

## Resources

- [API Documentation](http://127.0.0.1:8000/docs)
- [GitHub Repository](https://github.com/your-org/antgent)
- [Previous Release Notes](./2025-10-10-updates.md)

---

For questions or issues, please open a GitHub issue.
